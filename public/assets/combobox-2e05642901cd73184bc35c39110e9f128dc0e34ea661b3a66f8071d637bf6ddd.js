!function(t){t.widget("custom.combobox",{_create:function(){this.wrapper=t("<span>").addClass("custom-combobox").insertAfter(this.element),this.element.hide(),this._createAutocomplete(),this._createShowAllButton()},_createAutocomplete:function(){var e=this.element.children(":selected"),o=e.val()?e.text():"";this.input=t("<input>").appendTo(this.wrapper).val(o).attr("title","").attr("placeholder","Search by city or request type").addClass("custom-combobox-input ui-widget ui-widget-content ui-state-default ui-corner-left").autocomplete({delay:0,minLength:0,source:t.proxy(this,"_source"),position:{my:"center top",at:"center bottom",of:".custom-combobox"}}).tooltip({tooltipClass:"ui-state-highlight"}),this._on(this.input,{autocompleteselect:function(t,e){e.item.option.selected=!0,this._trigger("select",t,{item:e.item.option})},autocompletechange:"_removeIfInvalid"})},_createShowAllButton:function(){var e=this.input,o=!1;t("<a>").attr("tabIndex",-1).attr("title","Show All Items").appendTo(this.wrapper).button({icons:{primary:"ui-icon-triangle-1-s"},text:!1}).removeClass("ui-corner-all").addClass("custom-combobox-toggle ui-corner-right").attr("aria-hidden","true").mousedown(function(){o=e.autocomplete("widget").is(":visible")}).click(function(){e.focus(),o||e.autocomplete("search","")})},_source:function(e,o){var i=new RegExp(t.ui.autocomplete.escapeRegex(e.term),"i");o(this.element.children("option").map(function(){var o=t(this).text();return!this.value||e.term&&!i.test(o)?void 0:{label:o,value:o,option:this}}))},_removeIfInvalid:function(e,o){if(!o.item){var i=this.input.val(),n=i.toLowerCase(),c=!1;this.element.children("option").each(function(){return t(this).text().toLowerCase()===n?(this.selected=c=!0,!1):void 0}),c||(this.input.val("").attr("title",i+" didn't match any item").tooltip("open"),this.element.val(""),this._delay(function(){this.input.tooltip("close").attr("title","")},2500),this.input.autocomplete("instance").term="")}},_destroy:function(){this.wrapper.remove(),this.element.show()}})}(jQuery),$(function(){$("#combobox").combobox({select:function(t,e){$("#combobox").trigger("change")}}),$("#toggle").click(function(){$("#combobox").toggle()}),$(".custom-combobox").click(function(){$(".custom-combobox-input").select()}),$(".custom-combobox").addClass("highlited")});