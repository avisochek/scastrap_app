function initMap(){var e=[{featureType:"water",elementType:"geometry",stylers:[{color:"blue"},{lightness:17}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:20}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#888888"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#ffffff"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#888888"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#888888"},{lightness:16}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:21}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#dedede"},{lightness:21}]},{elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#ffffff"},{lightness:0}]},{elementType:"labels.text.fill",stylers:[{color:"#000000"},{lightness:0}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#f2f2f2"},{lightness:19}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#fefefe"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#fefefe"},{lightness:17},{weight:1.2}]}],t=new google.maps.StyledMapType(e,{name:"Styled Map"}),s={mapTypeControl:!1,zoom:13,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,"map_style"]}};map=new google.maps.Map(document.getElementById("map"),s),map.mapTypes.set("map_style",t),$(window).on("resize orientationChange",function(e){google.maps.event.trigger(map,"resize")}),$("#map").on("resize orientationChange",function(e){google.maps.event.trigger(map,"resize")}),map.addListener("dragstart",function(){drag=!0}),map.addListener("click",function(){drag=!1}),map.addListener("mousedown",function(){$(".issue").removeClass("selected")})}function clearMap(){heatMap&&heatMap.setMap(null),clusterMap&&clusterMap.setMap(null),issueMap&&issueMap.setMap(null)}function plotHeatMap(e,t){issue_coords=e.map(function(e){return new google.maps.LatLng(e[1],e[0])}),heatMap=new google.maps.visualization.HeatmapLayer({data:issue_coords,map:null,radius:10,opacity:.75,maxIntensity:t[Math.floor(.9*t.sort().length)-1],gradient:["rgba(255,255,255,0)","#5EEDF0","#56F2C8","#4DF395","#45F55C","#5BF63C","#8FF833","#C8F92A","#FAEC21","#FCA917","#FD5F0E"]})}function plotClusterMap(e){clusterMap=new clustersOverlay(map);var t=new google.maps.LatLngBounds,s=[];return e.forEach(function(e){if("undefined"!=typeof e){var a=new google.maps.LatLng(e.lat,e.lng);t.extend(a),e.position=a,e.color="black",e.count=e.score,clusterMap.addCluster(e)}s.push(e.count)}),clusterMap.setMap(map),map.setCenter(new google.maps.LatLng(t.getCenter().lat(),t.getCenter().lng())),s}function plotIssuesMap(e){issueMap&&issueMap.setMap(null),issueMap=new issuesOverlay(map);var t=new google.maps.LatLngBounds;e.forEach(function(e){var s=new google.maps.LatLng(e.lat,e.lng);e.position=s,e.color="#000000",issueMap.addIssue(e),t.extend(s)}),issueMap.setMap(map),map.fitBounds(t)}function sort(e){return e.sort(function(e,t){return t>e})}var clusterMap,heatMap,issueMap,map,drag;